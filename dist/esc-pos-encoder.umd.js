!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("os"),require("path"),require("fs"),require("util"),require("stream"),require("https"),require("http")):"function"==typeof define&&define.amd?define(["os","path","fs","util","stream","https","http"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).EscPosEncoder=t(e.require$$0$2,e.require$$1,e.require$$0,e.require$$0$1,e.require$$2$1,e.require$$3,e.require$$4$1)}(this,(function(e,t,r,i,s,n,a){"use strict";function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){if(this instanceof e){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(t,r))}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),r}var c={exports:{}},l={html:{skipScheme:"html",lineBreakScheme:"html",whitespace:"collapse"}},u=/<\s*br(?:[\s/]*|\s[^>]*)>/gi,p={unix:[/\n/g,"\n"],dos:[/\r\n/g,"\r\n"],mac:[/\r/g,"\r"],html:[u,"<br>"],xhtml:[u,"<br/>"]},f={"ansi-color":/\x1B\[[^m]*m/g,html:/<[^>]*>/g,bbcode:/\[[^]]*\]/g},d={soft:1,hard:1},g={collapse:1,default:1,line:1,all:1},m={all:1,multi:1,none:1},w=/([sm])(\d+)/,b=/[-/\\^$*+?.()|[\]{}]/g;function y(e){return e.replace(b,"\\$&")}var _=c.exports=function(e,t,r){"object"==typeof e&&(e=(r=e).start,t=r.stop),"object"==typeof t&&(r=t,e=e||r.start,t=void 0),t||(t=e,e=0),r||(r={});var i,s,n,a,o,h,c,u,b,_,v,x,k,E,S,q,j,O,A="soft",M="default",L=4,I="all",C="",T="";if(i=r.preset)for(i instanceof Array||(i=[i]),O=0;O<i.length;O++){if(!(q=l[i[O]]))throw new TypeError('preset must be one of "'+Object.keys(l).join('", "')+'"');q.mode&&(A=q.mode),q.whitespace&&(M=q.whitespace),void 0!==q.tabWidth&&(L=q.tabWidth),q.skip&&(s=q.skip),q.skipScheme&&(n=q.skipScheme),q.lineBreak&&(a=q.lineBreak),q.lineBreakScheme&&(o=q.lineBreakScheme),q.respectLineBreaks&&(I=q.respectLineBreaks),void 0!==q.preservedLineIndent&&(c=q.preservedLineIndent),void 0!==q.wrapLineIndent&&(u=q.wrapLineIndent),q.wrapLineIndentBase&&(b=q.wrapLineIndentBase)}if(r.mode){if(!d[r.mode])throw new TypeError('mode must be one of "'+Object.keys(d).join('", "')+'"');A=r.mode}if(r.whitespace){if(!g[r.whitespace])throw new TypeError('whitespace must be one of "'+Object.keys(g).join('", "')+'"');M=r.whitespace}if(void 0!==r.tabWidth){if(!(parseInt(r.tabWidth,10)>=0))throw new TypeError("tabWidth must be a non-negative integer");L=parseInt(r.tabWidth,10)}if(S=new Array(L+1).join(" "),r.respectLineBreaks){if(!m[r.respectLineBreaks]&&!w.test(r.respectLineBreaks))throw new TypeError('respectLineBreaks must be one of "'+Object.keys(m).join('", "')+'", "m<num>", "s<num>"');I=r.respectLineBreaks}if("multi"===I)I="m",h=2;else if(!m[I]){var F=w.exec(I);I=F[1],h=parseInt(F[2],10)}if(void 0!==r.preservedLineIndent){if(!(parseInt(r.preservedLineIndent,10)>=0))throw new TypeError("preservedLineIndent must be a non-negative integer");c=parseInt(r.preservedLineIndent,10)}if(c>0&&(C=new Array(c+1).join(" ")),void 0!==r.wrapLineIndent){if(isNaN(parseInt(r.wrapLineIndent,10)))throw new TypeError("wrapLineIndent must be an integer");u=parseInt(r.wrapLineIndent,10)}if(r.wrapLineIndentBase&&(b=r.wrapLineIndentBase),b){if(void 0===u)throw new TypeError("wrapLineIndent must be specified when wrapLineIndentBase is specified");if(b instanceof RegExp)E=b;else{if("string"!=typeof b)throw new TypeError("wrapLineIndentBase must be either a RegExp object or a string");E=new RegExp(y(b))}}else if(u>0)T=new Array(u+1).join(" ");else if(u<0)throw new TypeError("wrapLineIndent must be non-negative when a base is not specified");if(r.skipScheme){if(!f[r.skipScheme])throw new TypeError('skipScheme must be one of "'+Object.keys(f).join('", "')+'"');n=r.skipScheme}if(r.skip&&(s=r.skip),s)if(s instanceof RegExp)(_=s).global||(j="g",_.ignoreCase&&(j+="i"),_.multiline&&(j+="m"),_=new RegExp(_.source,j));else{if("string"!=typeof s)throw new TypeError("skip must be either a RegExp object or a string");_=new RegExp(y(s),"g")}if(!_&&n&&(_=f[n]),r.lineBreakScheme){if(!p[r.lineBreakScheme])throw new TypeError('lineBreakScheme must be one of "'+Object.keys(p).join('", "')+'"');o=r.lineBreakScheme}if(r.lineBreak&&(a=r.lineBreak),o&&(q=p[o])&&(v=q[0],x=q[1]),a)if(a instanceof Array&&(1===a.length?a=a[0]:a.length>=2&&(a[0]instanceof RegExp?(v=a[0],"string"==typeof a[1]&&(x=a[1])):a[1]instanceof RegExp?(v=a[1],"string"==typeof a[0]&&(x=a[0])):"string"==typeof a[0]&&"string"==typeof a[1]?(v=new RegExp(y(a[0]),"g"),x=a[1]):a=a[0])),"string"==typeof a)x=a,v||(v=new RegExp(y(a),"g"));else if(a instanceof RegExp)v=a;else if(!(a instanceof Array))throw new TypeError("lineBreak must be a RegExp object, a string, or an array consisted of a RegExp object and a string");v||(v=/\n/g,x="\n"),j="g",v.ignoreCase&&(j+="i"),v.multiline&&(j+="m"),k=new RegExp("\\s*(?:"+v.source+")(?:"+v.source+"|\\s)*",j),v.global||(v=new RegExp(v.source,j));var R="hard"===A?/\b/:/(\S+\s+)/,N=new Array(e+1).join(" "),B="default"===M||"collapse"===M,D="collapse"===M,P="line"===M,z="all"===M,$=/\t/g,U=/  +/g,G=/^\s+/,V=/\s+$/,W=/\S/,J=/\s/,H=t-e;return function(r){var i;if(r=r.toString().replace($,S),!x){if(v.lastIndex=0,!(i=v.exec(r)))throw new TypeError("Line break string for the output not specified");x=i[0]}var s,n,a,o,c,l,p,f,d,g=0;for(s=[],k.lastIndex=0,i=k.exec(r);i;){if(s.push(r.substring(g,i.index)),"none"!==I){for(a=[],o=0,v.lastIndex=0,n=v.exec(i[0]);n;)a.push(i[0].substring(o,n.index)),o=n.index+n[0].length,n=v.exec(i[0]);a.push(i[0].substring(o)),s.push({type:"break",breaks:a})}else c=D?" ":i[0].replace(v,""),s.push({type:"break",remaining:c});g=i.index+i[0].length,i=k.exec(r)}if(s.push(r.substring(g)),_)for(d=[],l=0;l<s.length;l++){var m=s[l];if("string"!=typeof m)d.push(m);else{for(g=0,_.lastIndex=0,i=_.exec(m);i;)d.push(m.substring(g,i.index)),d.push({type:"skip",value:i[0]}),g=i.index+i[0].length,i=_.exec(m);d.push(m.substring(g))}}else d=s;var w=[];for(l=0;l<d.length;l++){var b=d[l];if("string"!=typeof b)w.push(b);else{D&&(b=b.replace(U," "));var y=b.split(R),q=[];for(p=0;p<y.length;p++){var j=y[p];if("hard"===A)for(f=0;f<j.length;f+=H)q.push(j.slice(f,f+H));else q.push(j)}w=w.concat(q)}}var O,M=0,L=e+C.length,F=[N+C],K=0,X=!0,Y=!0,Q=T;function Z(r){var i,s,n,a=F[M];if(z)L>t&&(K=K||t,n=a.length-(L-K),F[M]=a.substring(0,n)),K=0;else{for(i=a.length-1;i>=e&&" "===a[i];)i--;for(;i>=e&&J.test(a[i]);)i--;++i!==a.length&&(F[M]=a.substring(0,i)),Y&&X&&P&&L>t&&(n=a.length-(L-t))<i&&(n=i)}if(Y&&(Y=!1,E&&(i=F[M].substring(e).search(E),Q=i>=0&&i+u>0?new Array(i+u+1).join(" "):"")),n){for(;n+H<a.length;)z?(s=a.substring(n,n+H),F.push(N+Q+s)):F.push(N+Q),n+=H,M++;if(!r)return s=a.substring(n),Q+s;z?(s=a.substring(n),F.push(N+Q+s)):F.push(N+Q),M++}return""}for(l=0;l<w.length;l++){var ee=w[l];if(""!==ee)if("string"==typeof ee){for(var te;;){if(te=void 0,L+ee.length>t&&L+(te=ee.replace(V,"")).length>t&&""!==te&&L>e){if(O=Z(!1),F.push(N+Q),M++,L=e+Q.length,O){F[M]+=O,L+=O.length,X=!0;continue}!B&&(!P||Y&&X)||(ee=ee.replace(G,"")),X=!1}else X&&(B||P&&(!Y||!X)?""!==(ee=ee.replace(G,""))&&(X=!1):W.test(ee)&&(X=!1));break}z&&te&&L+te.length>t&&(K=L+te.length),F[M]+=ee,L+=ee.length}else if("break"===ee.type)if("none"!==I){var re=ee.breaks,ie=re.length-1;if("s"===I){for(p=0;p<ie;p++)re[p+1].length<h?re[p+1]=D?" ":re[p]+re[p+1]:(z&&(F[M]+=re[p],L+=re[p].length),Z(!0),F.push(N+C),M++,L=e+C.length,Y=X=!0);(!X||z||P&&Y)&&((D||!X&&""===re[ie])&&(re[ie]=" "),F[M]+=re[ie],L+=re[ie].length)}else if("m"===I&&ie<h)(!X||z||P&&Y)&&(D?ee=" ":(ee=re.join(""),X||""!==ee||(ee=" ")),F[M]+=ee,L+=ee.length);else if(B){for(Z(!0),p=0;p<ie;p++)F.push(N+C),M++;L=e+C.length,Y=X=!0}else for((z||Y&&X)&&(F[M]+=re[0],L+=re[0].length),p=0;p<ie;p++)Z(!0),F.push(N+C+re[p+1]),M++,L=e+C.length+re[p+1].length,Y=X=!0}else(!X||z||P&&Y)&&(ee=ee.remaining,(D||!X&&""===ee)&&(ee=" "),F[M]+=ee,L+=ee.length);else"skip"===ee.type&&(L>t&&(O=Z(!1),F.push(N+Q),M++,L=e+Q.length,O&&(F[M]+=O,L+=O.length),X=!0),F[M]+=ee.value)}return Z(!0),F.join(x)}};_.soft=_,_.hard=function(){var e=[].slice.call(arguments),t=e.length-1;return"object"==typeof e[t]?e[t].mode="hard":e.push({mode:"hard"}),_.apply(null,e)},_.wrap=function(e){var t=[].slice.call(arguments);return t.shift(),_.apply(null,t)(e)};var v=o(c.exports),x={},k=require("./skia.android-arm64.node"),E=h(Object.freeze({__proto__:null,default:k})),S=require("./skia.android-arm-eabi.node"),q=h(Object.freeze({__proto__:null,default:S})),j=require("./skia.win32-x64-msvc.node"),O=h(Object.freeze({__proto__:null,default:j})),A=require("./skia.win32-ia32-msvc.node"),M=h(Object.freeze({__proto__:null,default:A})),L=require("./skia.win32-arm64-msvc.node"),I=h(Object.freeze({__proto__:null,default:L})),C=require("./skia.darwin-x64.node"),T=h(Object.freeze({__proto__:null,default:C})),F=require("./skia.darwin-arm64.node"),R=h(Object.freeze({__proto__:null,default:F})),N=require("./skia.freebsd-x64.node"),B=h(Object.freeze({__proto__:null,default:N})),D=require("./skia.linux-x64-musl.node"),P=h(Object.freeze({__proto__:null,default:D})),z=require("./skia.linux-x64-gnu.node"),$=h(Object.freeze({__proto__:null,default:z})),U=require("./skia.linux-x64-gnu_1.node"),G=h(Object.freeze({__proto__:null,default:U})),V=require("./skia.linux-arm64-musl.node"),W=h(Object.freeze({__proto__:null,default:V})),J=require("./skia.linux-arm64-gnu.node"),H=h(Object.freeze({__proto__:null,default:J})),K=require("./skia.linux-arm-gnueabihf.node"),X=h(Object.freeze({__proto__:null,default:K}));const{existsSync:Y,readFileSync:Q}=r,{join:Z}=t,{platform:ee,arch:te}=process;let re=null,ie=!1,se=null;function ne(){if(process.report&&"function"==typeof process.report.getReport){const{glibcVersionRuntime:e}=process.report.getReport().header;return!e}try{return Q("/usr/bin/ldd","utf8").includes("musl")}catch(e){return!0}}switch(ee){case"android":switch(te){case"arm64":ie=Y(Z(__dirname,"skia.android-arm64.node"));try{re=ie?E:require("@napi-rs/canvas-android-arm64")}catch(e){se=e}break;case"arm":ie=Y(Z(__dirname,"skia.android-arm-eabi.node"));try{re=ie?q:require("@napi-rs/canvas-android-arm-eabi")}catch(e){se=e}break;default:throw new Error(`Unsupported architecture on Android ${te}`)}break;case"win32":switch(te){case"x64":ie=Y(Z(__dirname,"skia.win32-x64-msvc.node"));try{re=ie?O:require("@napi-rs/canvas-win32-x64-msvc")}catch(e){se=e}break;case"ia32":ie=Y(Z(__dirname,"skia.win32-ia32-msvc.node"));try{re=ie?M:require("@napi-rs/canvas-win32-ia32-msvc")}catch(e){se=e}break;case"arm64":ie=Y(Z(__dirname,"skia.win32-arm64-msvc.node"));try{re=ie?I:require("@napi-rs/canvas-win32-arm64-msvc")}catch(e){se=e}break;default:throw new Error(`Unsupported architecture on Windows: ${te}`)}break;case"darwin":switch(te){case"x64":ie=Y(Z(__dirname,"skia.darwin-x64.node"));try{re=ie?T:require("@napi-rs/canvas-darwin-x64")}catch(e){se=e}break;case"arm64":ie=Y(Z(__dirname,"skia.darwin-arm64.node"));try{re=ie?R:require("@napi-rs/canvas-darwin-arm64")}catch(e){se=e}break;default:throw new Error(`Unsupported architecture on macOS: ${te}`)}break;case"freebsd":if("x64"!==te)throw new Error(`Unsupported architecture on FreeBSD: ${te}`);ie=Y(Z(__dirname,"skia.freebsd-x64.node"));try{re=ie?B:require("@napi-rs/canvas-freebsd-x64")}catch(e){se=e}break;case"linux":switch(te){case"x64":if(ne()){ie=Y(Z(__dirname,"skia.linux-x64-musl.node"));try{re=ie?P:require("@napi-rs/canvas-linux-x64-musl")}catch(e){se=e}}else{ie=Y(Z(__dirname,"skia.linux-x64-gnu.node"));try{re=ie?$:G}catch(e){se=e}}break;case"arm64":if(ne()){ie=Y(Z(__dirname,"skia.linux-arm64-musl.node"));try{re=ie?W:require("@napi-rs/canvas-linux-arm64-musl")}catch(e){se=e}}else{ie=Y(Z(__dirname,"skia.linux-arm64-gnu.node"));try{re=ie?H:require("@napi-rs/canvas-linux-arm64-gnu")}catch(e){se=e}}break;case"arm":ie=Y(Z(__dirname,"skia.linux-arm-gnueabihf.node"));try{re=ie?X:require("@napi-rs/canvas-linux-arm-gnueabihf")}catch(e){se=e}break;default:throw new Error(`Unsupported architecture on Linux: ${te}`)}break;default:throw new Error(`Unsupported OS: ${ee}, architecture: ${te}`)}if(!re){if(se)throw se;throw new Error("Failed to load native binding")}const{ChromaSubsampling:ae,SvgExportFlag:oe,CanvasRenderingContext2D:he,CanvasGradient:ce,ImageData:le,Image:ue,PathOp:pe,FillType:fe,StrokeCap:de,StrokeJoin:ge,Path:me,CanvasPattern:we,convertSVGTextToPath:be,CanvasElement:ye,SVGCanvas:_e,clearAllCache:ve,GlobalFonts:xe}=re;x.ChromaSubsampling=ae,x.SvgExportFlag=oe,x.CanvasRenderingContext2D=he,x.CanvasGradient=ce,x.ImageData=le,x.Image=ue,x.PathOp=pe,x.FillType=fe,x.StrokeCap=de,x.StrokeJoin=ge,x.Path=me,x.CanvasPattern=we,x.convertSVGTextToPath=be,x.CanvasElement=ye,x.SVGCanvas=_e,x.clearAllCache=ve,x.GlobalFonts=xe;const{inspect:ke}=i;let Ee=class e{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}static fromPoint(t){return new e(t.x,t.y,void 0!==t.z?t.z:0,void 0!==t.w?t.w:1)}matrixTransform(t){return(t.is2D||t instanceof SVGMatrix)&&0===this.z&&1===this.w?new e(this.x*t.a+this.y*t.c+t.e,this.x*t.b+this.y*t.d+t.f,0,1):new e(this.x*t.m11+this.y*t.m21+this.z*t.m31+this.w*t.m41,this.x*t.m12+this.y*t.m22+this.z*t.m32+this.w*t.m42,this.x*t.m13+this.y*t.m23+this.z*t.m33+this.w*t.m43,this.x*t.m14+this.y*t.m24+this.z*t.m34+this.w*t.m44)}toJSON(){return{x:this.x,y:this.y,z:this.z,w:this.w}}},Se=class e{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.width=r,this.height=i}static fromRect(t){return new e(t.x,t.y,t.width,t.height)}get top(){return this.y}get left(){return this.x}get right(){return this.x+this.width}get bottom(){return this.y+this.height}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,left:this.left,right:this.right,bottom:this.bottom}}};for(const e of["top","right","bottom","left"]){const t=Object.getOwnPropertyDescriptor(Se.prototype,e);t.enumerable=!0,Object.defineProperty(Se.prototype,e,t)}const qe=10,je=12,Oe=13,Ae=15,Me=180/Math.PI,Le=Math.PI/180,Ie=Symbol("values"),Ce=Symbol("is2D");function Te(e){const t=e.split(/\(/,1)[0];if("matrix"===t)return function(e){let t=e.replace(/matrix\(/,"").split(/,/,7);if(6!==t.length)throw new Error(`Failed to parse ${e}`);return t=t.map(parseFloat),[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]}(e);if("matrix3d"===t)return function(e){const t=e.replace(/matrix3d\(/,"").split(/,/,17);if(16!==t.length)throw new Error(`Failed to parse ${e}`);return t.map(parseFloat)}(e);throw new Error(`${t} parsing not implemented`)}const Fe=(e,t,r)=>{if("number"!=typeof r)throw new TypeError("Expected number");e[Ie][t]=r},Re=(e,t,r)=>{if("number"!=typeof r)throw new TypeError("Expected number");t===qe||t===Ae?1!==r&&(e[Ce]=!1):0!==r&&(e[Ce]=!1),e[Ie][t]=r},Ne=e=>{const t=Object.create(De.prototype);return t.constructor=De,t[Ce]=!0,t[Ie]=e,t},Be=(e,t)=>{const r=new Float64Array(16);for(let i=0;i<4;i++)for(let s=0;s<4;s++){let n=0;for(let r=0;r<4;r++)n+=e[4*i+r]*t[4*r+s];r[4*i+s]=n}return r};let De=class e{get m11(){return this[Ie][0]}set m11(e){Fe(this,0,e)}get m12(){return this[Ie][1]}set m12(e){Fe(this,1,e)}get m13(){return this[Ie][2]}set m13(e){Re(this,2,e)}get m14(){return this[Ie][3]}set m14(e){Re(this,3,e)}get m21(){return this[Ie][4]}set m21(e){Fe(this,4,e)}get m22(){return this[Ie][5]}set m22(e){Fe(this,5,e)}get m23(){return this[Ie][6]}set m23(e){Re(this,6,e)}get m24(){return this[Ie][7]}set m24(e){Re(this,7,e)}get m31(){return this[Ie][8]}set m31(e){Re(this,8,e)}get m32(){return this[Ie][9]}set m32(e){Re(this,9,e)}get m33(){return this[Ie][10]}set m33(e){Re(this,qe,e)}get m34(){return this[Ie][11]}set m34(e){Re(this,11,e)}get m41(){return this[Ie][12]}set m41(e){Fe(this,je,e)}get m42(){return this[Ie][13]}set m42(e){Fe(this,Oe,e)}get m43(){return this[Ie][14]}set m43(e){Re(this,14,e)}get m44(){return this[Ie][15]}set m44(e){Re(this,Ae,e)}get a(){return this[Ie][0]}set a(e){Fe(this,0,e)}get b(){return this[Ie][1]}set b(e){Fe(this,1,e)}get c(){return this[Ie][4]}set c(e){Fe(this,4,e)}get d(){return this[Ie][5]}set d(e){Fe(this,5,e)}get e(){return this[Ie][12]}set e(e){Fe(this,12,e)}get f(){return this[Ie][13]}set f(e){Fe(this,13,e)}get is2D(){return this[Ce]}get isIdentity(){const e=this[Ie];return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]}static fromMatrix(t){if(t instanceof e)return new e(t[Ie]);if(t instanceof SVGMatrix)return new e([t.a,t.b,t.c,t.d,t.e,t.f]);throw new TypeError("Expected DOMMatrix")}static fromFloat32Array(t){if(!(t instanceof Float32Array))throw new TypeError("Expected Float32Array");return new e(t)}static fromFloat64Array(t){if(!(t instanceof Float64Array))throw new TypeError("Expected Float64Array");return new e(t)}constructor(e){if(this[Ce]=!0,this[Ie]=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),"string"==typeof e){if(""===e)return;{const t=e.split(/\)\s+/,20).map(Te);if(0===t.length)return;e=t[0];for(let r=1;r<t.length;r++)e=Be(t[r],e)}}let t=0;if(e&&6===e.length)Fe(this,0,e[t++]),Fe(this,1,e[t++]),Fe(this,4,e[t++]),Fe(this,5,e[t++]),Fe(this,12,e[t++]),Fe(this,13,e[t++]);else if(e&&16===e.length)Fe(this,0,e[t++]),Fe(this,1,e[t++]),Re(this,2,e[t++]),Re(this,3,e[t++]),Fe(this,4,e[t++]),Fe(this,5,e[t++]),Re(this,6,e[t++]),Re(this,7,e[t++]),Re(this,8,e[t++]),Re(this,9,e[t++]),Re(this,qe,e[t++]),Re(this,11,e[t++]),Fe(this,je,e[t++]),Fe(this,Oe,e[t++]),Re(this,14,e[t++]),Re(this,Ae,e[t]);else if(void 0!==e)throw new TypeError("Expected string or array.")}dump(){const e=this[Ie];console.info([e.slice(0,4),e.slice(4,8),e.slice(8,12),e.slice(12,16)])}[ke.custom](e,t){if(e<0)return"[DOMMatrix]";const{a:r,b:i,c:s,d:n,e:a,f:o,is2D:h,isIdentity:c}=this;if(this.is2D)return`DOMMatrix ${ke({a:r,b:i,c:s,d:n,e:a,f:o,is2D:h,isIdentity:c},{colors:!0})}`;{const{m11:e,m12:t,m13:h,m14:c,m21:l,m22:u,m23:p,m24:f,m31:d,m32:g,m33:m,m34:w,m41:b,m42:y,m43:_,m44:v,is2D:x,isIdentity:k}=this;return`DOMMatrix ${ke({a:r,b:i,c:s,d:n,e:a,f:o,m11:e,m12:t,m13:h,m14:c,m21:l,m22:u,m23:p,m24:f,m31:d,m32:g,m33:m,m34:w,m41:b,m42:y,m43:_,m44:v,is2D:x,isIdentity:k},{colors:!0})}`}}multiply(e){return Ne(this[Ie]).multiplySelf(e)}multiplySelf(e){return this[Ie]=Be(e[Ie],this[Ie]),e.is2D||(this[Ce]=!1),this}preMultiplySelf(e){return this[Ie]=Be(this[Ie],e[Ie]),e.is2D||(this[Ce]=!1),this}translate(e,t,r){return Ne(this[Ie]).translateSelf(e,t,r)}translateSelf(e=0,t=0,r=0){return this[Ie]=Be([1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1],this[Ie]),0!==r&&(this[Ce]=!1),this}scale(e,t,r,i,s,n){return Ne(this[Ie]).scaleSelf(e,t,r,i,s,n)}scale3d(e,t,r,i){return Ne(this[Ie]).scale3dSelf(e,t,r,i)}scale3dSelf(e,t,r,i){return this.scaleSelf(e,e,e,t,r,i)}scaleSelf(e,t,r,i,s,n){return"number"!=typeof i&&(i=0),"number"!=typeof s&&(s=0),"number"!=typeof n&&(n=0),this.translateSelf(i,s,n),"number"!=typeof e&&(e=1),"number"!=typeof t&&(t=e),"number"!=typeof r&&(r=1),this[Ie]=Be([e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1],this[Ie]),this.translateSelf(-i,-s,-n),1===r&&0===n||(this[Ce]=!1),this}rotateFromVector(e,t){return Ne(this[Ie]).rotateFromVectorSelf(e,t)}rotateFromVectorSelf(e=0,t=0){const r=0===e&&0===t?0:Math.atan2(t,e)*Me;return this.rotateSelf(r)}rotate(e,t,r){return Ne(this[Ie]).rotateSelf(e,t,r)}rotateSelf(e,t,r){void 0===t&&void 0===r&&(r=e,e=t=0),"number"!=typeof t&&(t=0),"number"!=typeof r&&(r=0),0===e&&0===t||(this[Ce]=!1),e*=Le,t*=Le,r*=Le;let i=Math.cos(r),s=Math.sin(r);return this[Ie]=Be([i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1],this[Ie]),i=Math.cos(t),s=Math.sin(t),this[Ie]=Be([i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1],this[Ie]),i=Math.cos(e),s=Math.sin(e),this[Ie]=Be([1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1],this[Ie]),this}rotateAxisAngle(e,t,r,i){return Ne(this[Ie]).rotateAxisAngleSelf(e,t,r,i)}rotateAxisAngleSelf(e=0,t=0,r=0,i=0){const s=Math.sqrt(e*e+t*t+r*r);if(0===s)return this;1!==s&&(e/=s,t/=s,r/=s),i*=Le;const n=Math.cos(i),a=Math.sin(i),o=1-n,h=o*e,c=o*t;return this[Ie]=Be([h*e+n,h*t+a*r,h*r-a*t,0,h*t-a*r,c*t+n,c*r+a*e,0,h*r+a*t,c*r-a*e,o*r*r+n,0,0,0,0,1],this[Ie]),0===e&&0===t||(this[Ce]=!1),this}skewX(e){return Ne(this[Ie]).skewXSelf(e)}skewXSelf(e){if("number"!=typeof e)return this;const t=Math.tan(e*Le);return this[Ie]=Be([1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1],this[Ie]),this}skewY(e){return Ne(this[Ie]).skewYSelf(e)}skewYSelf(e){if("number"!=typeof e)return this;const t=Math.tan(e*Le);return this[Ie]=Be([1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this[Ie]),this}flipX(){return Ne(Be([-1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this[Ie]))}flipY(){return Ne(Be([1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],this[Ie]))}inverse(){return Ne(this[Ie]).invertSelf()}invertSelf(){if(!this[Ce])throw new Error("3D matrix inversion is not implemented.");{const t=this[Ie][0]*this[Ie][5]-this[Ie][1]*this[Ie][4];if(0!==t){const r=new e;return r.a=this[Ie][5]/t,r.b=-this[Ie][1]/t,r.c=-this[Ie][4]/t,r.d=this[Ie][0]/t,r.e=(this[Ie][4]*this[Ie][13]-this[Ie][5]*this[Ie][12])/t,r.f=(this[Ie][1]*this[Ie][12]-this[Ie][0]*this[Ie][13])/t,r}this[Ce]=!1,this[Ie]=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]}}setMatrixValue(t){const r=new e(t);return this[Ie]=r[Ie],this[Ce]=r[Ce],this}transformPoint(e){const t=e.x,r=e.y,i=e.z,s=e.w,n=this[Ie],a=n[0]*t+n[4]*r+n[8]*i+n[12]*s,o=n[1]*t+n[5]*r+n[9]*i+n[13]*s,h=n[2]*t+n[6]*r+n[10]*i+n[14]*s,c=n[3]*t+n[7]*r+n[11]*i+n[15]*s;return new Ee(a,o,h,c)}toFloat32Array(){return Float32Array.from(this[Ie])}toFloat64Array(){return this[Ie].slice(0)}toJSON(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,m11:this.m11,m12:this.m12,m13:this.m13,m14:this.m14,m21:this.m21,m22:this.m22,m23:this.m23,m24:this.m24,m31:this.m31,m32:this.m32,m33:this.m33,m34:this.m34,m41:this.m41,m42:this.m42,m43:this.m43,m44:this.m44,is2D:this.is2D,isIdentity:this.isIdentity}}toString(){return this.is2D?`matrix(${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e}, ${this.f})`:`matrix3d(${this[Ie].join(", ")})`}};for(const e of["a","b","c","d","e","f","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","is2D","isIdentity"]){const t=Object.getOwnPropertyDescriptor(De.prototype,e);t.enumerable=!0,Object.defineProperty(De.prototype,e,t)}var Pe={DOMPoint:Ee,DOMMatrix:De,DOMRect:Se};const ze=r,{Image:$e}=x,{Readable:Ue}=s;let Ge,Ve;const We=new Set([301,302]),Je=/^\s*data:/;function He(e,t,r,i,s){("https:"===e.protocol?Ve||(Ve=n):Ge||(Ge=a)).get(e,s||{},(e=>We.has(e.statusCode)&&"string"==typeof e.headers.location&&i>0?He(new URL(e.headers.location),t,r,i-1,s):"number"==typeof e.statusCode&&(e.statusCode<200||e.statusCode>=300)?r(new Error(`remote source rejected with status code ${e.statusCode}`)):void Ke(e).then(t,r))).on("error",r)}function Ke(e){return new Promise(((t,r)=>{const i=[];e.on("data",(e=>i.push(e))),e.on("end",(()=>t(Buffer.concat(i)))),e.on("error",r)}))}function Xe(e,t){const r=new $e;return r.src=e,"string"==typeof t&&(r.alt=t),r}const{platform:Ye,homedir:Qe}=e,{join:Ze}=t,{clearAllCache:et,CanvasRenderingContext2D:tt,CanvasElement:rt,SVGCanvas:it,Path:st,ImageData:nt,Image:at,CanvasPattern:ot,GlobalFonts:ht,PathOp:ct,FillType:lt,StrokeJoin:ut,StrokeCap:pt,convertSVGTextToPath:ft}=x,{DOMPoint:dt,DOMMatrix:gt,DOMRect:mt}=Pe,wt=async function(e,t={}){if(e instanceof Ue)return Xe(await Ke(e),t.alt);if(Buffer.isBuffer(e))return Xe(e,t.alt);if((r=e)&&"Buffer"===r.type||Array.isArray(r)||r instanceof ArrayBuffer||r instanceof SharedArrayBuffer||r instanceof Object.getPrototypeOf(Uint8Array))return Xe(Buffer.from(e),t.alt);var r;if(e instanceof $e)return Xe(e.src,t.alt);if("string"==typeof e&&Je.test(e)){const r=e.indexOf(","),i=e.lastIndexOf("base64",r)<0?"utf-8":"base64";return Xe(Buffer.from(e.slice(r+1),i),t.alt)}if("string"==typeof e||e instanceof URL){if(await async function(e){try{return await ze.promises.access(e,ze.constants.F_OK),!0}catch{return!1}}(e))return Xe(await ze.promises.readFile(e),t.alt);e=e instanceof URL?e:new URL(e);return Xe(await new Promise(((r,i)=>He(e,r,i,"number"==typeof t.maxRedirects&&t.maxRedirects>=0?t.maxRedirects:20,t.requestOptions))),t.alt)}throw new TypeError("unsupported image source")};"families"in ht||Object.defineProperty(ht,"families",{get:function(){return JSON.parse(ht.getFamilies())}}),"has"in ht||Object.defineProperty(ht,"has",{value:function(e){return!!JSON.parse(ht.getFamilies()).find((({family:t})=>t===e))},configurable:!1,enumerable:!1,writable:!1});const bt=tt.prototype.getTransform;function yt(e,t,r){return void 0!==r?new it(e,t,r):new rt(e,t)}tt.prototype.getTransform=function(){const e=bt.apply(this,arguments);if(e instanceof gt)return e;const{a:t,b:r,c:i,d:s,e:n,f:a}=e;return new gt([t,r,i,s,n,a])};class _t{constructor(e,t,r){return yt(e,t,r)}static[Symbol.hasInstance](e){return e instanceof rt||e instanceof it}}if(!process.env.DISABLE_SYSTEM_FONTS_LOAD){ht.loadSystemFonts();const e=Ye(),t=Qe();switch(e){case"win32":ht.loadFontsFromDir(Ze(t,"AppData","Local","Microsoft","Windows","Fonts"));break;case"darwin":ht.loadFontsFromDir(Ze(t,"Library","Fonts"));break;case"linux":ht.loadFontsFromDir(Ze("usr","local","share","fonts")),ht.loadFontsFromDir(Ze(t,".fonts"))}}var vt={clearAllCache:et,Canvas:_t,createCanvas:yt,Path2D:st,ImageData:nt,Image:at,PathOp:ct,FillType:lt,StrokeCap:pt,StrokeJoin:ut,SvgExportFlag:{ConvertTextToPaths:1,NoPrettyXML:2,RelativePathEncoding:4},GlobalFonts:ht,convertSVGTextToPath:ft,DOMPoint:dt,DOMMatrix:gt,DOMRect:mt,loadImage:wt};var xt=o(new class{grayscale(e){for(let t=0;t<e.data.length;t+=4){const r=.299*e.data[t]+.587*e.data[t+1]+.114*e.data[t+2];e.data.fill(r,t,t+3)}return e}threshold(e,t){for(let r=0;r<e.data.length;r+=4){const i=.299*e.data[r]+.587*e.data[r+1]+.114*e.data[r+2]<t?0:255;e.data.fill(i,r,r+3)}return e}bayer(e,t){const r=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let i=0;i<e.data.length;i+=4){const s=.299*e.data[i]+.587*e.data[i+1]+.114*e.data[i+2],n=i/4%e.width,a=Math.floor(i/4/e.width),o=Math.floor((s+r[n%4][a%4])/2)<t?0:255;e.data.fill(o,i,i+3)}return e}floydsteinberg(e){const t=e.width,r=new Uint8ClampedArray(e.width*e.height);for(let t=0,i=0;i<e.data.length;t++,i+=4)r[t]=.299*e.data[i]+.587*e.data[i+1]+.114*e.data[i+2];for(let i=0,s=0;s<e.data.length;i++,s+=4){const n=r[i]<129?0:255,a=Math.floor((r[i]-n)/16);e.data.fill(n,s,s+3),r[i+1]+=7*a,r[i+t-1]+=3*a,r[i+t]+=5*a,r[i+t+1]+=1*a}return e}atkinson(e){const t=e.width,r=new Uint8ClampedArray(e.width*e.height);for(let t=0,i=0;i<e.data.length;t++,i+=4)r[t]=.299*e.data[i]+.587*e.data[i+1]+.114*e.data[i+2];for(let i=0,s=0;s<e.data.length;i++,s+=4){const n=r[i]<129?0:255,a=Math.floor((r[i]-n)/8);e.data.fill(n,s,s+3),r[i+1]+=a,r[i+2]+=a,r[i+t-1]+=a,r[i+t]+=a,r[i+t+1]+=a,r[i+2*t]+=a}return e}});var kt=o(new class{flatten(e,t){for(let r=0;r<e.data.length;r+=4){const i=e.data[r+3],s=255-i;e.data[r]=(i*e.data[r]+s*t[0])/255,e.data[r+1]=(i*e.data[r+1]+s*t[1])/255,e.data[r+2]=(i*e.data[r+2]+s*t[2])/255,e.data[r+3]=255}return e}});const Et={cp437:{name:"USA, Standard Europe",languages:["en"],offset:128,chars:"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp720:{name:"Arabic",languages:["ar"],offset:128,chars:"éâàçêëèïîّْô¤ـûùءآأؤ£إئابةتثجحخدذرزسشص«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀ضطظعغفµقكلمنهوىي≡ًٌٍَُِ≈°∙·√ⁿ²■ "},cp737:{name:"Greek",languages:["el"],offset:128,chars:"ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩαβγδεζηθικλμνξοπρσςτυφχψ░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀ωάέήϊίόύϋώΆΈΉΊΌΎΏ±≥≤ΪΫ÷≈°∙·√ⁿ²■ "},cp775:{name:"Baltic Rim",languages:["et","lt"],offset:128,chars:"ĆüéāäģåćłēŖŗīŹÄÅÉæÆōöĢ¢ŚśÖÜø£Ø×¤ĀĪóŻżź”¦©®¬½¼Ł«»░▒▓│┤ĄČĘĖ╣║╗╝ĮŠ┐└┴┬├─┼ŲŪ╚╔╩╦╠═╬Žąčęėįšųūž┘┌█▄▌▐▀ÓßŌŃõÕµńĶķĻļņĒŅ’­±“¾¶§÷„°∙·¹³²■ "},cp850:{name:"Multilingual",languages:["en"],offset:128,chars:"ÇüéâäůćçłëŐőîŹÄĆÉĹĺôöĽľŚśÖÜŤťŁ×čáíóúĄąŽžĘę¬źČş«»░▒▓│┤ÁÂĚŞ╣║╗╝Żż┐└┴┬├─┼Ăă╚╔╩╦╠═╬¤đĐĎËďŇÍÎě┘┌█▄ŢŮ▀ÓßÔŃńňŠšŔÚŕŰýÝţ´­˝˛ˇ˘§÷¸°¨˙űŘř■ "},cp851:{name:"Greek",languages:["el"],offset:128,chars:"ÇüéâäàΆçêëèïîΈÄΉΊ ΌôöΎûùΏÖÜά£έήίϊΐόύΑΒΓΔΕΖΗ½ΘΙ«»░▒▓│┤ΚΛΜΝ╣║╗╝ΞΟ┐└┴┬├─┼ΠΡ╚╔╩╦╠═╬ΣΤΥΦΧΨΩαβγ┘┌█▄δε▀ζηθικλμνξοπρσςτ´­±υφχ§ψ¸°¨ωϋΰώ■ "},cp852:{name:"Latin 2",languages:["hu","pl","cz"],offset:128,chars:"ÇüéâäůćçłëŐőîŹÄĆÉĹĺôöĽľŚśÖÜŤťŁ×čáíóúĄąŽžĘę¬źČş«»░▒▓│┤ÁÂĚŞ╣║╗╝Żż┐└┴┬├─┼Ăă╚╔╩╦╠═╬¤đĐĎËďŇÍÎě┘┌█▄ŢŮ▀ÓßÔŃńňŠšŔÚŕŰýÝţ´­˝˛ˇ˘§÷¸°¨˙űŘř■ "},cp853:{name:"Turkish",languages:["tr"],offset:128,chars:"ÇüéâäàĉçêëèïîìÄĈÉċĊôöòûùİÖÜĝ£Ĝ×ĵáíóúñÑĞğĤĥ�½Ĵş«»░▒▓│┤ÁÂÀŞ╣║╗╝Żż┐└┴┬├─┼Ŝŝ╚╔╩╦╠═╬¤��ÊËÈıÍÎÏ┘┌█▄�Ì▀ÓßÔÒĠġµĦħÚÛÙŬŭ�´­�ℓŉ˘§÷¸°¨˙�³²■ "},cp855:{name:"Cyrillic",languages:["bg"],offset:128,chars:"ђЂѓЃёЁєЄѕЅіІїЇјЈљЉњЊћЋќЌўЎџЏюЮъЪаАбБцЦдДеЕфФгГ«»░▒▓│┤хХиИ╣║╗╝йЙ┐└┴┬├─┼кК╚╔╩╦╠═╬¤лЛмМнНоОп┘┌█▄Пя▀ЯрРсСтТуУжЖвВьЬ№­ыЫзЗшШэЭщЩчЧ§■ "},cp857:{name:"Turkish",languages:["tr"],offset:128,chars:"ÇüéâäàåçêëèïîıÄÅÉæÆôöòûùİÖÜø£ØŞşáíóúñÑĞğ¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ºªÊËÈ�ÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµ�×ÚÛÙìÿ¯´­±�¾¶§÷¸°¨·¹³²■ "},cp858:{name:"Euro",languages:["en"],offset:128,chars:"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø×ƒáíóúñÑªº¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤ðÐÊËÈ€ÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµþÞÚÛÙýÝ¯´­±‗¾¶§÷¸°¨·¹³²■ "},cp860:{name:"Portuguese",languages:["pt"],offset:128,chars:"ÇüéâãàÁçêÊèÍÔìÃÂÉÀÈôõòÚùÌÕÜ¢£Ù₧ÓáíóúñÑªº¿Ò¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp861:{name:"Icelandic",languages:["is"],offset:128,chars:"ÇüéâäàåçêëèÐðÞÄÅÉæÆôöþûÝýÖÜø£Ø₧ƒáíóúÁÍÓÚ¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp862:{name:"Hebrew",languages:["he"],offset:128,chars:"אבגדהוזחטיךכלםמןנסעףפץצקרשת¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp863:{name:"Canadian French",languages:["fr"],offset:128,chars:"ÇüéâÂà¶çêëèïî‗À§ÉÈÊôËÏûù¤ÔÜ¢£ÙÛƒ¦´óú¨¸³¯Î⌐¬½¼¾«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp864:{name:"Arabic",languages:["ar"],offset:0,chars:"\0\b\t\n\v\f\r !\"#$٪&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~°·∙√▒─│┼┤┬├┴┐┌└┘β∞φ±½¼≈«»ﻷﻸ��ﻻﻼ� ­ﺂ£¤ﺄ��ﺎﺏﺕﺙ،ﺝﺡﺥ٠١٢٣٤٥٦٧٨٩ﻑ؛ﺱﺵﺹ؟¢ﺀﺁﺃﺅﻊﺋﺍﺑﺓﺗﺛﺟﺣﺧﺩﺫﺭﺯﺳﺷﺻﺿﻁﻅﻋﻏ¦¬÷×ﻉـﻓﻗﻛﻟﻣﻧﻫﻭﻯﻳﺽﻌﻎﻍﻡﹽّﻥﻩﻬﻰﻲﻐﻕﻵﻶﻝﻙﻱ■�"},cp865:{name:"Nordic",languages:["sv","dk"],offset:128,chars:"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø₧ƒáíóúñÑªº¿⌐¬½¼¡«¤░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp866:{name:"Cyrillic 2",languages:["ru"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёЄєЇїЎў°∙·√№¤■ "},cp869:{name:"Greek",languages:["el"],offset:128,chars:"������Ά�·¬¦‘’Έ―ΉΊΪΌ��ΎΫ©Ώ²³ά£έήίϊΐόύΑΒΓΔΕΖΗ½ΘΙ«»░▒▓│┤ΚΛΜΝ╣║╗╝ΞΟ┐└┴┬├─┼ΠΡ╚╔╩╦╠═╬ΣΤΥΦΧΨΩαβγ┘┌█▄δε▀ζηθικλμνξοπρσςτ΄­±υφχ§ψ΅°¨ωϋΰώ■ "},cp874:{name:"Thai",languages:["th"],offset:128,chars:"€����…�����������‘’“”•–—�������� กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����"},cp1098:{name:"Farsi",languages:["fa"],offset:128,chars:"  ،؛؟ًآﺂاﺎءأﺄؤﺋبﺑﭖﭘتﺗثﺛجﺟﭺﭼ×حﺣخﺧدذرزﮊسﺳشﺷصﺻ«»░▒▓│┤ضﺿﻁﻃ╣║╗╝¤ﻅ┐└┴┬├─┼ﻇع╚╔╩╦╠═╬ ﻊﻋﻌغﻎﻏﻐفﻓ┘┌█▄قﻗ▀ﮎﻛﮒﮔلﻟمﻣنﻧوهﻫﻬﮤﯼ­ﯽﯾـ٠١٢٣٤٥٦٧٨٩■ "},cp1118:{name:"Lithuanian",languages:["lt"],offset:128,chars:"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤ĄČĘĖ╣║╗╝ĮŠ┐└┴┬├─┼ŲŪ╚╔╩╦╠═╬Žąčęėįšųūž┘┌█▄▌▐▀αβΓπΣσµτΦΘΩδ∞φε⋂≡±≥≤„“÷≈°∙˙√ⁿ²■ "},cp1119:{name:"Lithuanian",languages:["lt"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤ĄČĘĖ╣║╗╝ĮŠ┐└┴┬├─┼ŲŪ╚╔╩╦╠═╬Žąčęėįšųūž┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁё≥≤„“÷≈°∙·√ⁿ²■ "},cp1125:{name:"Ukrainian",languages:["uk"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюяЁёҐґЄєІіЇї·√№¤■ "},cp1162:{name:"Thai",languages:["th"],offset:128,chars:"€…‘’“”•–— กขฃคฅฆงจฉชซฌญฎฏฐฑฒณดตถทธนบปผฝพฟภมยรฤลฦวศษสหฬอฮฯะัาำิีึืฺุู����฿เแโใไๅๆ็่้๊๋์ํ๎๏๐๑๒๓๔๕๖๗๘๙๚๛����"},cp2001:{name:"Lithuanian KBL or 771",languages:["lt"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█ĄąČčрстуфхцчшщъыьэюяĘęĖėĮįŠšŲųŪūŽž■ "},cp3001:{name:"Estonian 1 or 1116",languages:["et"],offset:128,chars:"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜø£Ø×ƒáíóúñÑªº¿®¬½¼¡«»░▒▓│┤ÁÂÀ©╣║╗╝¢¥┐└┴┬├─┼ãÃ╚╔╩╦╠═╬¤šŠÊËÈıÍÎÏ┘┌█▄¦Ì▀ÓßÔÒõÕµžŽÚÛÙýÝ¯´­±‗¾¶§÷¸°¨·¹³²■ "},cp3002:{name:"Estonian 2",languages:["et"],offset:128,chars:" ¡¢£¤¥¦§¨©ª«¬­®‾°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏŠÑÒÓÔÕÖ×ØÙÚÛÜÝŽßàáâãäåæçèéêëìíîïšñòóôõö÷øùúûüýžÿ"},cp3011:{name:"Latvian 1",languages:["lv"],offset:128,chars:"ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤Ā╢ņ╕╣║╗╝╜╛┐└┴┬├─┼ā╟╚╔╩╦╠═╬╧Š╤čČ╘╒ģĪī┘┌█▄ūŪ▀αßΓπΣσµτΦΘΩδ∞φε∩ĒēĢķĶļĻžŽ∙·√Ņš■ "},cp3012:{name:"Latvian 2 (modified 866)",languages:["lv"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤Ā╢ņ╕╣║╗╝Ō╛┐└┴┬├─┼ā╟╚╔╩╦╠═╬╧Š╤čČ╘╒ģĪī┘┌█▄ūŪ▀рстуфхцчшщъыьэюяĒēĢķĶļĻžŽō·√Ņš■ "},cp3021:{name:"Bulgarian (MIK)",languages:["bg"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя└┴┬├─┼╣║╚╔╩╦╠═╬┐░▒▓│┤№§╗╝┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp3041:{name:"Maltese ISO 646",languages:["mt"],offset:0,chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZġżħ^_ċabcdefghijklmnopqrstuvwxyzĠŻĦĊ"},cp3840:{name:"Russian (modified 866)",languages:["ru"],offset:128,chars:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмноп░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀рстуфхцчшщъыьэюя≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp3841:{name:"Ghost",languages:["ru"],offset:128,chars:"ғәёіїјҝөўүӽӈҹҷє£ҒӘЁІЇЈҜӨЎҮӼӇҸҶЄЪ !\"#$%&'()*+,-./0123456789:;<=>?юабцдефгхийклмнопярстужвьызшэщчъЮАБЦДЕФГХИЙКЛМНОПЯРСТУЖВЬЫЗШЭЩЧ∅"},cp3843:{name:"Polish (Mazovia)",languages:["pl"],offset:128,chars:"ÇüéâäàąçêëèïîćÄĄĘęłôöĆûùŚÖÜ¢Ł¥śƒŹŻóÓńŃźż¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp3844:{name:"Czech (Kamenický)",languages:["cz"],offset:128,chars:"ČüéďäĎŤčěĚĹÍľĺÄÁÉžŽôöÓůÚýÖÜŠĽÝŘťáíóúňŇŮÔšřŕŔ¼§«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp3845:{name:"Hungarian (CWI-2)",languages:["hu"],offset:128,chars:"ÇüéâäàåçêëèïîÍÄÁÉæÆőöÓűÚŰÖÜ¢£¥₧ƒáíóúñÑªŐ¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp3846:{name:"Turkish",languages:["tr"],offset:128,chars:"ÇüéâäàåçêëèïîıÄÅÉæÆôöòûùİÖÜ¢£¥ŞşáíóúñÑĞğ¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ "},cp3847:{name:"Brazil ABNT",languages:["pt"],offset:256,chars:""},cp3848:{name:"Brazil ABICOMP",languages:["pt"],offset:160,chars:" ÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖŒÙÚÛÜŸ¨£¦§°¡àáâãäçèéêëìíîïñòóôõöœùúûüÿßªº¿±"},iso88591:{name:"Latin 1",languages:["en"],offset:128,chars:" ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ"},iso88592:{name:"Latin 2",languages:["hu","pl","cz"],offset:128,chars:" Ą˘Ł¤ĽŚ§¨ŠŞŤŹ­ŽŻ°ą˛ł´ľśˇ¸šşťź˝žżŔÁÂĂÄĹĆÇČÉĘËĚÍÎĎĐŃŇÓÔŐÖ×ŘŮÚŰÜÝŢßŕáâăäĺćçčéęëěíîďđńňóôőö÷řůúűüýţ˙"},iso88597:{name:"Greek",languages:["el"],offset:128,chars:" ‘’£€₯¦§¨©ͺ«¬­�―°±²³΄΅Ά·ΈΉΊ»Ό½ΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ�ΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ�"},iso885915:{name:"Latin 9",languages:["fr"],offset:128,chars:" ¡¢£€¥Š§š©ª«¬­®¯°±²³Žµ¶·ž¹º»ŒœŸ¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ"},rk1048:{name:"Kazakh",languages:["kk"],offset:128,chars:"ЂЃ‚ѓ„…†‡€‰Љ‹ЊҚҺЏђ‘’“”•–—�™љ›њқһџ ҰұӘ¤Ө¦§Ё©Ғ«¬­®Ү°±Ііөµ¶·ё№ғ»әҢңүАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя"},windows1250:{name:"Latin 2",languages:["hu","pl","cz"],offset:128,chars:"€�‚�„…†‡�‰Š‹ŚŤŽŹ�‘’“”•–—�™š›śťžź ˇ˘Ł¤Ą¦§¨©Ş«¬­®Ż°±˛ł´µ¶·¸ąş»Ľ˝ľżŔÁÂĂÄĹĆÇČÉĘËĚÍÎĎĐŃŇÓÔŐÖ×ŘŮÚŰÜÝŢßŕáâăäĺćçčéęëěíîďđńňóôőö÷řůúűüýţ˙"},windows1251:{name:"Cyrillic",languages:["ru"],offset:128,chars:"ЂЃ‚ѓ„…†‡€‰Љ‹ЊЌЋЏђ‘’“”•–—�™љ›њќћџ ЎўЈ¤Ґ¦§Ё©Є«¬­®Ї°±Ііґµ¶·ё№є»јЅѕїАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя"},windows1252:{name:"Latin",languages:["fr"],offset:128,chars:"€�‚ƒ„…†‡ˆ‰Š‹Œ�Ž��‘’“”•–—˜™š›œ�žŸ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ"},windows1253:{name:"Greek",languages:["el"],offset:128,chars:"€�‚ƒ„…†‡�‰�‹�����‘’“”•–—�™�›���� ΅Ά£¤¥¦§¨©�«¬­®―°±²³΄µ¶·ΈΉΊ»Ό½ΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡ�ΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώ�"},windows1254:{name:"Turkish",languages:["tr"],offset:128,chars:"€�‚ƒ„…†‡ˆ‰Š‹Œ����‘’“”•–—˜™š›œ��Ÿ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓÔÕÖ×ØÙÚÛÜİŞßàáâãäåæçèéêëìíîïğñòóôõö÷øùúûüışÿ"},windows1255:{name:"Hebrew",languages:["he"],offset:128,chars:"€�‚ƒ„…†‡ˆ‰�‹�����‘’“”•–—˜™�›���� ¡¢£₪¥¦§¨©×«¬­®¯°±²³´µ¶·¸¹÷»¼½¾¿ְֱֲֳִֵֶַָֹֺֻּֽ־ֿ׀ׁׂ׃װױײ׳״�������אבגדהוזחטיךכלםמןנסעףפץצקרשת��‎‏�"},windows1256:{name:"Arabic",languages:["ar"],offset:128,chars:"€پ‚ƒ„…†‡ˆ‰ٹ‹Œچژڈگ‘’“”•–—ک™ڑ›œ‌‍ں ،¢£¤¥¦§¨©ھ«¬­®¯°±²³´µ¶·¸¹؛»¼½¾؟ہءآأؤإئابةتثجحخدذرزسشصض×طظعغـفقكàلâمنهوçèéêëىيîïًٌٍَôُِ÷ّùْûü‎‏ے"},windows1257:{name:"Baltic Rim",languages:["et","lt"],offset:128,chars:"€�‚�„…†‡�‰�‹�¨ˇ¸�‘’“”•–—�™�›�¯˛� �¢£¤�¦§Ø©Ŗ«¬­®Æ°±²³´µ¶·ø¹ŗ»¼½¾æĄĮĀĆÄÅĘĒČÉŹĖĢĶĪĻŠŃŅÓŌÕÖ×ŲŁŚŪÜŻŽßąįāćäåęēčéźėģķīļšńņóōõö÷ųłśūüżž˙"},windows1258:{name:"Vietnamese",languages:["vi"],offset:128,chars:"€�‚ƒ„…†‡ˆ‰�‹Œ����‘’“”•–—˜™�›œ��Ÿ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂĂÄÅÆÇÈÉÊË̀ÍÎÏĐÑ̉ÓÔƠÖ×ØÙÚÛÜỮßàáâăäåæçèéêë́íîïđṇ̃óôơö÷øùúûüư₫ÿ"}},St={en:"The quick brown fox jumps over the lazy dog.",jp:"イロハニホヘト チリヌルヲ ワカヨタレソ ツネナラム",pt:"O próximo vôo à noite sobre o Atlântico, põe freqüentemente o único médico.",fr:"Les naïfs ægithales hâtifs pondant à Noël où il gèle sont sûrs d'être déçus en voyant leurs drôles d'œufs abîmés.",sv:"Flygande bäckasiner söka strax hwila på mjuka tuvor.",dk:"Quizdeltagerne spiste jordbær med fløde",el:"ξεσκεπάζω την ψυχοφθόρα βδελυγμία",tr:"Pijamalı hasta, yağız şoföre çabucak güvendi.",ru:"Съешь же ещё этих мягких французских булок да выпей чаю",hu:"Árvíztűrő tükörfúrógép",pl:"Pchnąć w tę łódź jeża lub ośm skrzyń fig",cz:"Mohu jíst sklo, neublíží mi.",ar:"أنا قادر على أكل الزجاج و هذا لا يؤلمني.",et:"Ma võin klaasi süüa, see ei tee mulle midagi.",lt:"Aš galiu valgyti stiklą ir jis manęs nežeidžia.",bg:"Мога да ям стъкло, то не ми вреди.",is:"Ég get etið gler án þess að meiða mig.",he:"אני יכול לאכול זכוכית וזה לא מזיק לי.",fa:".من می توانم بدونِ احساس درد شيشه بخورم",uk:"Я можу їсти скло, і воно мені не зашкодить.",vi:"Tôi có thể ăn thủy tinh mà không hại gì.",kk:"қазақша",lv:"Es varu ēst stiklu, tas man nekaitē.",mt:"Nista' niekol il-ħġieġ u ma jagħmilli xejn.",th:"ฉันกินกระจกได้ แต่มันไม่ทำให้ฉันเจ็บ"};class qt{static getEncodings(){return Object.keys(Et)}static getTestStrings(e){return void 0!==Et[e]&&void 0!==Et[e].languages?Et[e].languages.map((e=>({language:e,string:St[e]}))):[]}static supports(e){return void 0!==Et[e]&&void 0!==Et[e].chars}static encode(e,t){const r=new Uint8Array(e.length);let i="\0".repeat(128),s=128;void 0!==Et[t]&&void 0!==Et[t].chars&&(i=Et[t].chars,s=Et[t].offset);for(let t=0;t<e.length;t++){const n=e.codePointAt(t);if(n<128)r[t]=n;else{const a=i.indexOf(e[t]);-1!==a?r[t]=s+a:n<256&&(n<s||n>=s+i.length)?r[t]=n:r[t]=63}}return r}static autoEncode(e,t){const r=[];let i,s=-1;for(let n=0;n<e.length;n++){const a=e.codePointAt(n);let o,h=0;if(a<128&&(o=i||t[0],h=a),!o&&i){const t=Et[i].chars.indexOf(e[n]);-1!==t&&(o=i,h=Et[i].offset+t)}if(!o)for(let r=0;r<t.length;r++){const i=Et[t[r]].chars.indexOf(e[n]);if(-1!==i){o=t[r],h=Et[t[r]].offset+i;break}}o||(o=i||t[0],h=63),i!=o&&(i&&(r[s].bytes=new Uint8Array(r[s].bytes)),s++,r[s]={codepage:o,bytes:[]},i=o),r[s].bytes.push(h)}return i&&(r[s].bytes=new Uint8Array(r[s].bytes)),r}}const jt={epson:{cp437:0,shiftjis:1,cp850:2,cp860:3,cp863:4,cp865:5,cp851:11,cp853:12,cp857:13,cp737:14,iso88597:15,windows1252:16,cp866:17,cp852:18,cp858:19,cp720:32,cp775:33,cp855:34,cp861:35,cp862:36,cp864:37,cp869:38,iso88592:39,iso885915:40,cp1098:41,cp1118:42,cp1119:43,cp1125:44,windows1250:45,windows1251:46,windows1253:47,windows1254:48,windows1255:49,windows1256:50,windows1257:51,windows1258:52,rk1048:53},zjiang:{cp437:0,shiftjis:1,cp850:2,cp860:3,cp863:4,cp865:5,windows1252:16,cp866:17,cp852:18,cp858:19,windows1255:32,cp861:56,cp855:60,cp857:61,cp862:62,cp864:63,cp737:64,cp851:65,cp869:66,cp1119:68,cp1118:69,windows1250:72,windows1251:73,cp3840:74,cp3843:76,cp3844:77,cp3845:78,cp3846:79,cp3847:80,cp3848:81,cp2001:83,cp3001:84,cp3002:85,cp3011:86,cp3012:87,cp3021:88,cp3041:89,windows1253:90,windows1254:91,windows1256:92,cp720:93,windows1258:94,cp775:95},bixolon:{cp437:0,shiftjis:1,cp850:2,cp860:3,cp863:4,cp865:5,cp851:11,cp858:19},star:{cp437:0,shiftjis:1,cp850:2,cp860:3,cp863:4,cp865:5,windows1252:16,cp866:17,cp852:18,cp858:19},citizen:{cp437:0,shiftjis:1,cp850:2,cp860:3,cp863:4,cp865:5,cp852:18,cp866:17,cp857:8,windows1252:16,cp858:19,cp864:40},legacy:{cp437:0,cp737:64,cp850:2,cp775:95,cp852:18,cp855:60,cp857:61,cp858:19,cp860:3,cp861:56,cp862:62,cp863:4,cp864:28,cp865:5,cp866:17,cp869:66,cp936:255,cp949:253,cp950:254,cp1252:16,iso88596:22,shiftjis:252,windows874:30,windows1250:72,windows1251:73,windows1252:71,windows1253:90,windows1254:91,windows1255:32,windows1256:92,windows1257:25,windows1258:94}};class Ot{constructor(e){this._reset(e)}_reset(e){this._options=Object.assign({width:null,embedded:!1,wordWrap:!0,imageMode:"column",codepageMapping:"epson",codepageCandidates:["cp437","cp858","cp860","cp861","cp863","cp865","cp852","cp857","cp855","cp866","cp869"]},e),this._embedded=this._options.width&&this._options.embedded,this._buffer=[],this._queued=[],this._cursor=0,this._codepage="ascii",this._state={codepage:0,align:"left",bold:!1,italic:!1,underline:!1,invert:!1,width:1,height:1}}_encode(e){if("auto"!=this._codepage)return qt.encode(e,this._codepage);let t;t="string"==typeof this._options.codepageMapping?jt[this._options.codepageMapping]:this._options.codepageMapping;const r=qt.autoEncode(e,this._options.codepageCandidates);let i=0;for(let e=0;e<r.length;e++)i+=3+r[e].bytes.byteLength;const s=new Uint8Array(i);let n=0;for(let e=0;e<r.length;e++)s.set([27,116,t[r[e].codepage]],n),s.set(r[e].bytes,n+3),n+=3+r[e].bytes.byteLength,this._state.codepage=t[r[e].codepage];return s}_queue(e){e.forEach((e=>this._queued.push(e)))}_flush(){if(this._embedded){let e=this._options.width-this._cursor;if("left"==this._state.align&&this._queued.push(new Array(e).fill(32)),"center"==this._state.align){const t=e%2;e>>=1,e>0&&this._queued.push(new Array(e).fill(32)),e+t>0&&this._queued.unshift(new Array(e+t).fill(32))}"right"==this._state.align&&this._queued.unshift(new Array(e).fill(32))}this._buffer=this._buffer.concat(this._queued),this._queued=[],this._cursor=0}_wrap(e,t){if(t||this._options.wordWrap&&this._options.width){const r="-".repeat(this._cursor);return v(t||this._options.width,{lineBreak:"\n",whitespace:"all"})(r+e).substring(this._cursor).split("\n")}return[e]}_restoreState(){this.bold(this._state.bold),this.italic(this._state.italic),this.underline(this._state.underline),this.invert(this._state.invert),this._queue([27,116,this._state.codepage])}_getCodepageIdentifier(e){let t;return t="string"==typeof this._options.codepageMapping?jt[this._options.codepageMapping]:this._options.codepageMapping,t[e]}initialize(){return this._queue([27,64]),this._flush(),this}codepage(e){if("auto"===e)return this._codepage=e,this;if(!qt.supports(e))throw new Error("Unknown codepage");let t;if(t="string"==typeof this._options.codepageMapping?jt[this._options.codepageMapping]:this._options.codepageMapping,void 0===t[e])throw new Error("Codepage not supported by printer");return this._codepage=e,this._state.codepage=t[e],this._queue([27,116,t[e]]),this}text(e,t){const r=this._wrap(e,t);for(let e=0;e<r.length;e++){const t=this._encode(r[e]);this._queue([t]),this._cursor+=r[e].length*this._state.width,this._options.width&&!this._embedded&&(this._cursor=this._cursor%this._options.width),e<r.length-1&&this.newline()}return this}newline(){return this._flush(),this._queue([10,13]),this._embedded&&this._restoreState(),this}line(e,t){return this.text(e,t),this.newline(),this}underline(e){return void 0===e&&(e=!this._state.underline),this._state.underline=e,this._queue([27,45,Number(e)]),this}italic(e){return void 0===e&&(e=!this._state.italic),this._state.italic=e,this._queue([27,52,Number(e)]),this}bold(e){return void 0===e&&(e=!this._state.bold),this._state.bold=e,this._queue([27,69,Number(e)]),this}width(e){if(void 0===e&&(e=1),"number"!=typeof e)throw new Error("Width must be a number");if(e<1||e>8)throw new Error("Width must be between 1 and 8");return this._state.width=e,this._queue([29,33,this._state.height-1|this._state.width-1<<4]),this}height(e){if(void 0===e&&(e=1),"number"!=typeof e)throw new Error("Height must be a number");if(e<1||e>8)throw new Error("Height must be between 1 and 8");return this._state.height=e,this._queue([29,33,this._state.height-1|this._state.width-1<<4]),this}invert(e){return void 0===e&&(e=!this._state.invert),this._state.invert=e,this._queue([29,66,Number(e)]),this}size(e){return e="small"===e?1:0,this._queue([27,77,e]),this}align(e){const t={left:0,center:1,right:2};if(!(e in t))throw new Error("Unknown alignment");return this._state.align=e,this._embedded||this._queue([27,97,t[e]]),this}table(e,t){0!=this._cursor&&this.newline();for(let r=0;r<t.length;r++){const i=[];let s=0;for(let n=0;n<e.length;n++){const a=[];if("string"==typeof t[r][n]){const i=v(e[n].width,{lineBreak:"\n"})(t[r][n]).split("\n");for(let t=0;t<i.length;t++)"right"==e[n].align?a[t]=this._encode(i[t].padStart(e[n].width)):a[t]=this._encode(i[t].padEnd(e[n].width))}if("function"==typeof t[r][n]){const i=new Ot(Object.assign({},this._options,{width:e[n].width,embedded:!0}));i._codepage=this._codepage,i.align(e[n].align),t[r][n](i);const s=i.encode();let o=[];for(let e=0;e<s.byteLength;e++)e<s.byteLength-1&&10===s[e]&&13===s[e+1]?(a.push(o),o=[],e++):o.push(s[e]);o.length&&a.push(o)}s=Math.max(s,a.length),i[n]=a}for(let t=0;t<e.length;t++)if(i[t].length<s)for(let r=i[t].length;r<s;r++){let r="top";void 0!==e[t].verticalAlign&&(r=e[t].verticalAlign),"bottom"==r?i[t].unshift(new Array(e[t].width).fill(32)):i[t].push(new Array(e[t].width).fill(32))}for(let t=0;t<s;t++){for(let r=0;r<e.length;r++)void 0!==e[r].marginLeft&&this.raw(new Array(e[r].marginLeft).fill(32)),this.raw(i[r][t]),void 0!==e[r].marginRight&&this.raw(new Array(e[r].marginRight).fill(32));this.newline()}}return this}rule(e){return e=Object.assign({style:"single",width:this._options.width||10},e||{}),this._queue([27,116,this._getCodepageIdentifier("cp437"),new Array(e.width).fill("double"===e.style?205:196)]),this._queue([27,116,this._state.codepage]),this.newline(),this}box(e,t){let r;r="double"==(e=Object.assign({style:"single",width:this._options.width||30,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},e||{})).style?[201,187,200,188,205,186]:[218,191,192,217,196,179],0!=this._cursor&&this.newline(),this._restoreState(),this._queue([27,116,this._getCodepageIdentifier("cp437")]),this._queue([new Array(e.marginLeft).fill(32),r[0],new Array(e.width-2).fill(r[4]),r[1],new Array(e.marginRight).fill(32)]),this.newline();const i=[];if("string"==typeof t){const r=v(e.width-2-e.paddingLeft-e.paddingRight,{lineBreak:"\n"})(t).split("\n");for(let t=0;t<r.length;t++)"right"==e.align?i[t]=this._encode(r[t].padStart(e.width-2-e.paddingLeft-e.paddingRight)):i[t]=this._encode(r[t].padEnd(e.width-2-e.paddingLeft-e.paddingRight))}if("function"==typeof t){const r=new Ot(Object.assign({},this._options,{width:e.width-2-e.paddingLeft-e.paddingRight,embedded:!0}));r._codepage=this._codepage,r.align(e.align),t(r);const s=r.encode();let n=[];for(let e=0;e<s.byteLength;e++)e<s.byteLength-1&&10===s[e]&&13===s[e+1]?(i.push(n),n=[],e++):n.push(s[e]);n.length&&i.push(n)}for(let t=0;t<i.length;t++)this._queue([new Array(e.marginLeft).fill(32),r[5],new Array(e.paddingLeft).fill(32)]),this._queue([i[t]]),this._restoreState(),this._queue([27,116,this._getCodepageIdentifier("cp437")]),this._queue([new Array(e.paddingRight).fill(32),r[5],new Array(e.marginRight).fill(32)]),this.newline();return this._queue([new Array(e.marginLeft).fill(32),r[2],new Array(e.width-2).fill(r[4]),r[3],new Array(e.marginRight).fill(32)]),this._restoreState(),this.newline(),this}barcode(e,t,r){if(this._embedded)throw new Error("Barcodes are not supported in table cells or boxes");const i={upca:0,upce:1,ean13:2,ean8:3,code39:4,coda39:4,itf:5,codabar:6,code93:72,code128:73,"gs1-128":80,"gs1-databar-omni":81,"gs1-databar-truncated":82,"gs1-databar-limited":83,"gs1-databar-expanded":84,"code128-auto":85};if(!(t in i))throw new Error("Symbology not supported by printer");{const s=qt.encode(e,"ascii");0!=this._cursor&&this.newline(),this._queue([29,104,r,29,119,"code39"===t?2:3]),"code128"==t&&123!==s[0]?this._queue([29,107,i[t],s.length+2,123,66,s]):i[t]>64?this._queue([29,107,i[t],s.length,s]):this._queue([29,107,i[t],s,0])}return this._flush(),this}qrcode(e,t,r,i){if(this._embedded)throw new Error("QR codes are not supported in table cells or boxes");this._queue([10]);const s={1:49,2:50};if(void 0===t&&(t=2),!(t in s))throw new Error("Model must be 1 or 2");if(this._queue([29,40,107,4,0,49,65,s[t],0]),void 0===r&&(r=6),"number"!=typeof r)throw new Error("Size must be a number");if(r<1||r>8)throw new Error("Size must be between 1 and 8");this._queue([29,40,107,3,0,49,67,r]);const n={l:48,m:49,q:50,h:51};if(void 0===i&&(i="m"),!(i in n))throw new Error("Error level must be l, m, q or h");this._queue([29,40,107,3,0,49,69,n[i]]);const a=qt.encode(e,"iso88591"),o=a.length+3;return this._queue([29,40,107,o%255,o/255,49,80,48,a]),this._queue([29,40,107,3,0,49,81,48]),this._flush(),this}image(e,t,r,i,s){if(this._embedded)throw new Error("Images are not supported in table cells or boxes");if(t%8!=0)throw new Error("Width must be a multiple of 8");if(r%8!=0)throw new Error("Height must be a multiple of 8");void 0===i&&(i="threshold"),void 0===s&&(s=128);const n=new vt.Canvas(t,r).getContext("2d");n.drawImage(e,0,0,t,r);let a=n.getImageData(0,0,t,r);switch(a=kt.flatten(a,[255,255,255]),i){case"threshold":a=xt.threshold(a,s);break;case"bayer":a=xt.bayer(a,s);break;case"floydsteinberg":a=xt.floydsteinberg(a);break;case"atkinson":a=xt.atkinson(a)}const o=(e,i)=>e<t&&i<r?a.data[4*(t*i+e)]>0?0:1:0,h=(e,t)=>{const r=new Uint8Array(e*t>>3);for(let i=0;i<t;i++)for(let t=0;t<e;t+=8)for(let s=0;s<8;s++)r[i*(e>>3)+(t>>3)]|=o(t+s,i)<<7-s;return r};return 0!=this._cursor&&this.newline(),"column"==this._options.imageMode&&(this._queue([27,51,36]),((e,t)=>{const r=[];for(let i=0;i<Math.ceil(t/24);i++){const t=new Uint8Array(3*e);for(let r=0;r<e;r++)for(let e=0;e<3;e++)for(let s=0;s<8;s++)t[3*r+e]|=o(r,24*i+s+8*e)<<7-s;r.push(t)}return r})(t,r).forEach((e=>{this._queue([27,42,33,255&t,t>>8&255,e,10])})),this._queue([27,50])),"raster"==this._options.imageMode&&this._queue([29,118,48,0,t>>3&255,t>>3>>8&255,255&r,r>>8&255,h(t,r)]),this._flush(),this}cut(e){if(this._embedded)throw new Error("Cut is not supported in table cells or boxes");let t=0;return"partial"==e&&(t=1),this._queue([29,86,t]),this}pulse(e,t,r){if(this._embedded)throw new Error("Pulse is not supported in table cells or boxes");return void 0===e&&(e=0),void 0===t&&(t=100),void 0===r&&(r=500),t=Math.min(500,Math.round(t/2)),r=Math.min(500,Math.round(r/2)),this._queue([27,112,e?1:0,255&t,255&r]),this}raw(e){return this._queue(e),this}encode(){this._flush();let e=0;this._buffer.forEach((t=>{"number"==typeof t?e++:e+=t.length}));const t=new Uint8Array(e);let r=0;return this._buffer.forEach((e=>{"number"==typeof e?(t[r]=e,r++):(t.set(e,r),r+=e.length)})),this._reset(),t}}return Ot}));
